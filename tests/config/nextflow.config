params {
    outdir = "results/"
    publish_dir_mode = "copy"
    singularity_pull_docker_container = false
}

process {
    cpus = 2
    memory = 4.GB
    time = 6.h

    // Lower memory for the samplesheet check in test runs so the test-suite
    // can run on machines with limited RAM without changing pipeline defaults.
    withName: 'NFCORE_CUTANDRUN:CUTANDRUN:INPUT_CHECK:SAMPLESHEET_CHECK' {
        memory = 4.GB
    }

    // Reduce `process_single` label memory for tests so many small steps fit
    // on lowâ€‘RAM CI/local runners (only affects the `test` profile).
    withLabel: process_single {
        memory = 4.GB
    }
}

// Tests: don't reference the shell $PROFILE variable here (Nextflow rejects
// unknown `PROFILE` config attributes). Enable Docker explicitly for the
// test config so `-profile docker,test` works reliably in CI and locally.
docker {
    enabled = true
    userEmulation = true
    registry = 'quay.io'
    runOptions = "--platform linux/x86_64"
}
